/* Catppuccin Mocha Theme */
:root {
	/* Core palette */
	--ctp-base:#1e1e2e; --ctp-mantle:#181825; --ctp-crust:#11111b;
	--ctp-surface0:#313244; --ctp-surface1:#45475a; --ctp-surface2:#585b70;
	--ctp-overlay0:#6c7086; --ctp-overlay1:#7f849c; --ctp-overlay2:#9399b2;
	--ctp-text:#cdd6f4; --ctp-subtext0:#a6adc8; --ctp-subtext1:#bac2de;
	--ctp-rosewater:#f5e0dc; --ctp-flamingo:#f2cdcd; --ctp-pink:#f5c2e7;
	--ctp-mauve:#cba6f7; --ctp-red:#f38ba8; --ctp-maroon:#eba0ac;
	--ctp-peach:#fab387; --ctp-yellow:#f9e2af; --ctp-green:#a6e3a1;
	--ctp-teal:#94e2d5; --ctp-sky:#89dceb; --ctp-sapphire:#74c7ec;
	--ctp-blue:#89b4fa; --ctp-lavender:#b4befe;
	/* FX */
	--radius-sm:6px; --radius-md:10px; --radius-lg:18px;
	--shadow-sm:0 2px 4px -1px rgba(0,0,0,0.4);
	--shadow-md:0 4px 12px -2px rgba(0,0,0,0.45);
	--shadow-inset:inset 0 0 0 1px var(--ctp-surface1);
	--transition-fast:120ms cubic-bezier(.4,.2,.2,1);
}

* { box-sizing:border-box; }
html,body { height:100%; }
body {
	margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
	background:var(--ctp-mantle); /* slightly darker than base */
	color:var(--ctp-text);
	-webkit-font-smoothing:antialiased;
}

header {
	display:flex; justify-content:space-between; align-items:center;
	padding:16px 24px; background:var(--ctp-mantle);
	border-bottom:1px solid var(--ctp-surface0);
	position:sticky; top:0; z-index:20;
	box-shadow:var(--shadow-sm);
}

h1 { margin:0; font-size:21px; font-weight:600; letter-spacing:.5px; }

main {
	max-width:1000px; margin:0 auto; padding:24px 24px 40px; display:grid;
	gap:22px; grid-template-columns:1fr; align-items:start;
}

.panel {
	background:var(--ctp-mantle); border:1px solid var(--ctp-surface0);
	border-radius:var(--radius-lg); padding:20px 20px 22px; position:relative;
	box-shadow:var(--shadow-md);
	overflow:hidden;
}
.panel:before {
	content:""; position:absolute; inset:0; pointer-events:none;
	background:linear-gradient(145deg,rgba(255,255,255,0.02),rgba(255,255,255,0));
}

.modes { display:flex; gap:18px; align-items:center; margin:0 0 14px; flex-wrap:wrap; }
.mode { display:flex; gap:8px; align-items:center; font-size:14px; padding:4px 10px; border-radius:var(--radius-sm); background:var(--ctp-surface0); }
.mode input { accent-color:var(--ctp-blue); }

label { font-size:13px; font-weight:500; color:var(--ctp-subtext0); text-transform:uppercase; letter-spacing:.6px; }
textarea, select, input[type=text] {
	width:100%; background:var(--ctp-surface0); border:1px solid var(--ctp-surface1);
	color:var(--ctp-text); border-radius:var(--radius-md); padding:12px 13px; font-size:14px;
	transition:var(--transition-fast); outline:none;
}
textarea:focus, select:focus, input[type=text]:focus { border-color:var(--ctp-blue); box-shadow:0 0 0 2px rgba(137,180,250,0.35); }
textarea { resize:vertical; min-height:110px; }
/* Chat input should not show global focus glow */
.chat-app .input-pill textarea:focus { border-color:transparent !important; box-shadow:none !important; }

button {
	background:var(--ctp-surface0); color:var(--ctp-text); border:1px solid var(--ctp-surface1);
	padding:10px 16px; border-radius:var(--radius-md); cursor:pointer; font-size:14px; font-weight:500;
	line-height:1.2; display:inline-flex; align-items:center; gap:6px; position:relative;
	transition:var(--transition-fast); box-shadow:var(--shadow-inset);
}
button:hover { background:var(--ctp-surface1); }
button:active { transform:translateY(1px); }
button:focus-visible { outline:2px solid var(--ctp-blue); outline-offset:2px; }

.primary { background:var(--ctp-blue); border-color:var(--ctp-blue); color:var(--ctp-crust); box-shadow:0 2px 6px -1px rgba(137,180,250,.4); }
.primary:hover { background:var(--ctp-lavender); border-color:var(--ctp-lavender); }
.primary:active { background:var(--ctp-sapphire); }

.row { display:flex; gap:14px; align-items:flex-end; flex-wrap:wrap; }
.row.space-between { justify-content:space-between; align-items:center; }
.col { flex:1 1 260px; min-width:180px; }

.output {
	background:var(--ctp-base); border:1px solid var(--ctp-surface1);
	border-radius:var(--radius-lg); padding:18px 18px 20px; overflow:auto; max-height:460px;
	font-size:13.5px; position:relative;
}
.output table { width:100%; border-collapse:collapse; font-size:13.5px; }
.output caption { color:var(--ctp-subtext1); margin-bottom:6px; }
.output thead { position:sticky; top:0; background:var(--ctp-surface1); box-shadow:0 2px 0 0 var(--ctp-surface2); }
.output th, .output td { border:1px solid var(--ctp-surface2); padding:6px 8px; text-align:left; vertical-align:top; }
.output th { font-weight:600; font-size:12.5px; color:var(--ctp-rosewater); }
.output tbody tr { transition:var(--transition-fast); }
.output tbody tr:nth-child(even) { background:var(--ctp-surface0); }
.output tbody tr:hover { background:var(--ctp-surface2); }
.output pre { margin:0; white-space:pre-wrap; word-break:break-word; }
.output .placeholder { color:var(--ctp-overlay1); font-style:italic; }

footer { max-width:1000px; margin:0 auto 38px; color:var(--ctp-overlay1); font-size:12px; padding:0 24px; }
.muted { color:var(--ctp-overlay1); }
.env { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }

/* Utility */
.fade-in { animation:fade .45s ease; }
@keyframes fade { from { opacity:0; transform:translateY(4px);} to { opacity:1; transform:translateY(0);} }

/* Scrollbar styling */
.output::-webkit-scrollbar { width:10px; }
.output::-webkit-scrollbar-track { background:var(--ctp-surface0); }
.output::-webkit-scrollbar-thumb { background:var(--ctp-surface2); border-radius:8px; border:2px solid var(--ctp-surface0); }
.output::-webkit-scrollbar-thumb:hover { background:var(--ctp-overlay1); }

/* Responsive tweaks */
@media (max-width:760px) {
	main { padding:20px 16px 34px; }
	.panel { padding:18px 16px 20px; }
	textarea { min-height:90px; }
}

/* --- Modern Chat Layout Overrides --- */
.chat-app { display:flex; flex-direction:column; min-height:100vh; }
.chat-header { position:sticky; top:0; backdrop-filter:blur(6px); background:var(--ctp-mantle); display:flex; justify-content:center; align-items:center; padding:10px 20px 6px; border-bottom:1px solid var(--ctp-surface0); z-index:40; }
.chat-header .header-icons { position:absolute; right:16px; top:8px; display:flex; gap:10px; }
.logo.center { margin:0; font-size:28px; font-weight:600; letter-spacing:.8px; text-align:center; }
.icon-btn { background:var(--ctp-surface0); border:1px solid var(--ctp-surface1); color:var(--ctp-text); width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:17px; cursor:pointer; transition:var(--transition-fast); }
.icon-btn:hover { background:var(--ctp-surface1); }
.strategy-select { background:var(--ctp-surface0); border:1px solid var(--ctp-surface1); color:var(--ctp-text); padding:8px 12px; border-radius:var(--radius-md); font-size:13px; min-width:140px; }
.strategy-select:focus { outline:none; box-shadow:none; }
.chat-main { flex:1; position:relative; }
.chat-app .chat-main { max-width:100%; margin:0; }
.conversation.fullwidth { width:100%; padding:40px 100px 180px; }
.messages { list-style:none; margin:0; padding:0; width:100%; display:flex; flex-direction:column; gap:42px; }
.message { display:flex; flex-direction:column; gap:24px; animation:fade .4s ease; }
.message .row { display:flex; align-items:center; gap:12px; }
.row.assistant { justify-content:flex-end; }
.dot { width:28px; height:28px; border-radius:50%; background:var(--ctp-mauve); flex:0 0 28px; box-shadow:0 0 0 4px rgba(0,0,0,.25); }
.row.assistant .dot { background:var(--ctp-blue); }
.message.assistant .row { margin-left:auto; }
.bubble { background:#231f20; color:var(--ctp-text); padding:18px 26px; border-radius:26px; font-size:15px; line-height:1.5; border:1px solid #2e2a2b; min-width:320px; }
.bubble.reply { min-height:160px; display:flex; align-items:center; justify-content:center; font-size:20px; font-weight:500; letter-spacing:.5px; }
.avatar { width:36px; height:36px; flex:0 0 36px; border-radius:50%; background:var(--ctp-surface1); display:flex; align-items:center; justify-content:center; font-size:14px; font-weight:600; color:var(--ctp-text); box-shadow:var(--shadow-sm); }
.avatar.user { background:var(--ctp-blue); color:var(--ctp-crust); }
.avatar.assistant { background:var(--ctp-mauve); color:var(--ctp-crust); }
.bubble { position:relative; padding:18px 26px 22px; border-radius:26px; font-size:15px; background:var(--ctp-surface0); border:1px solid var(--ctp-surface1); box-shadow:0 3px 10px -3px rgba(0,0,0,.55); max-width:1200px; }
.bubble.user { margin-left:auto; }
.bubble.user { max-width:100%; }
.bubble.user { background:linear-gradient(135deg,var(--ctp-blue),var(--ctp-lavender)); color:var(--ctp-crust); border-color:var(--ctp-blue); margin-left:auto; }
.bubble.assistant { background:linear-gradient(145deg,var(--ctp-mantle),var(--ctp-surface0)); }
.bubble.error { border-color:var(--ctp-red); }
.bubble:before { content:""; position:absolute; bottom:0; width:18px; height:18px; background:inherit; }
.message.user .bubble:before { right:-8px; clip-path:polygon(0 0,100% 0,70% 100%); border-bottom-right-radius:6px; }
.message.assistant .bubble:before { left:-8px; clip-path:polygon(30% 0,100% 0,0 100%); border-bottom-left-radius:6px; }
.bubble table { margin-top:10px; font-size:13px; }
.bubble pre { margin:6px 0 0; font-size:12.5px; line-height:1.45; background:var(--ctp-base); padding:10px 12px; border-radius:12px; border:1px solid var(--ctp-surface1); overflow:auto; }
.assistant-table { background:transparent; border:0; padding:0; box-shadow:none; border-radius:0; }
.assistant-table table { margin:0; font-size:13px; width:100%; border-collapse:collapse; background:var(--ctp-crust); border:0; border-radius:0; box-shadow:none; }
.assistant-table table thead { background:var(--ctp-surface0); }
.assistant-table table th, .assistant-table table td { padding:10px 18px; border:0; border-bottom:1px solid var(--ctp-surface1); }
.assistant-table table th { font-weight:600; font-size:13px; color:var(--ctp-subtext1); letter-spacing:.4px; }
.assistant-table table tbody tr:hover { background:var(--ctp-surface0); }
.assistant-table table tbody tr:last-child td { border-bottom:0; }
.role-label { font-size:10px; letter-spacing:.7px; text-transform:uppercase; color:var(--ctp-overlay1); margin:0 0 6px; display:block; }
.timestamp { font-size:10px; letter-spacing:.5px; color:var(--ctp-overlay1); margin-top:8px; display:block; }
/* Action bar for assistant bubble */
.action-bar { display:flex; gap:8px; align-items:center; justify-content:flex-end; margin:-4px -4px 6px; }
.action-bar button { background:var(--ctp-surface1); border-color:var(--ctp-surface2); padding:4px 10px; font-size:11px; border-radius:14px; box-shadow:none; }
.action-bar button:hover { background:var(--ctp-overlay0); }
.raw-toggle.active { background:var(--ctp-mauve); color:var(--ctp-crust); border-color:var(--ctp-mauve); }
/* Table refinement inside bubble */
.bubble table { width:100%; border-collapse:collapse; border:1px solid var(--ctp-surface1); background:var(--ctp-base); border-radius:12px; overflow:hidden; display:block; max-width:100%; }
.bubble table thead { background:var(--ctp-surface1); position:sticky; top:0; z-index:1; }
.bubble table th, .bubble table td { padding:6px 10px; text-align:left; border-bottom:1px solid var(--ctp-surface2); }
.bubble table th { font-size:11.5px; letter-spacing:.5px; font-weight:600; color:var(--ctp-rosewater); }
.bubble table tr:last-child td { border-bottom:0; }
.bubble table caption { padding:8px 10px 4px; font-weight:600; text-align:left; font-size:12px; color:var(--ctp-subtext1); }
.bubble table tbody tr:hover { background:var(--ctp-surface0); }
.composer.minimal-bar { position:fixed; bottom:0; left:0; right:0; padding:40px 100px 46px; z-index:60; }
.input-pill { display:flex; align-items:center; gap:12px; background:#231f20; border:1px solid #2e2a2b; border-radius:30px; padding:8px 18px; box-shadow:0 4px 14px -6px rgba(0,0,0,.60); }
.input-pill textarea { background:transparent; border:0; flex:1; font-size:14px; color:var(--ctp-text); resize:none; outline:none; line-height:1.3; padding:2px 0; min-height:24px; }
.pill-icons { display:flex; align-items:center; gap:8px; }
.pill-icon { background:#2d292b; border:0; color:var(--ctp-text); width:34px; height:34px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:16px; cursor:pointer; transition:var(--transition-fast); }
.pill-icon:hover { background:#3a3537; }
.pill-icon.send { background:var(--ctp-blue); color:var(--ctp-crust); }
.pill-icon.send:hover { background:var(--ctp-lavender); }
.pill-icon.db-toggle { width:56px; height:28px; padding:0; border-radius:18px; background:var(--ctp-overlay0); position:relative; border:1px solid var(--ctp-surface2); display:flex; justify-content:flex-start; }
.pill-icon.db-toggle .knob { position:absolute; top:2px; left:2px; width:24px; height:24px; background:var(--ctp-text); border-radius:50%; transition:var(--transition-fast); box-shadow:0 2px 4px rgba(0,0,0,.45); }
.pill-icon.db-toggle[data-strategy="postgres"] { background:var(--ctp-green); }
.pill-icon.db-toggle[data-strategy="postgres"] .knob { transform:translateX(28px); }
.pill-icon.db-toggle[data-strategy="mongodb"] { background:var(--ctp-mauve); }
.pill-icon.db-toggle[data-strategy="mongodb"] .knob { transform:translateX(0); }
/* Mode slide toggle */
.pill-icon.mode-toggle { width:70px; height:28px; padding:0; border-radius:18px; background:#2d292b; position:relative; border:1px solid #3a3537; display:flex; justify-content:flex-start; }
.pill-icon.mode-toggle .knob { position:absolute; top:2px; left:2px; width:24px; height:24px; background:var(--ctp-text); border-radius:50%; transition:var(--transition-fast); box-shadow:0 2px 4px rgba(0,0,0,.45); z-index:2; }
.pill-icon.mode-toggle .mode-icon { position:absolute; top:50%; transform:translateY(-50%); width:20px; height:20px; opacity:.35; transition:var(--transition-fast); pointer-events:none; z-index:1; color:var(--ctp-overlay1); }
.pill-icon.mode-toggle .mode-icon.read { left:10px; }
.pill-icon.mode-toggle .mode-icon.write { right:10px; }
.pill-icon.mode-toggle[data-mode="read"] .knob { transform:translateX(42px); }
.pill-icon.mode-toggle[data-mode="read"] .mode-icon.read { opacity:0.95; color:var(--ctp-text); }
.pill-icon.mode-toggle[data-mode="write"] .knob { transform:translateX(0); }
.pill-icon.mode-toggle[data-mode="write"] .mode-icon.write { opacity:0.95; color:var(--ctp-text); }

/* Custom strategy dropdown */
.strategy-dropdown { position:relative; }
.strategy-button { background:#2d292b; border:1px solid #3a3537; display:flex; align-items:center; gap:8px; padding:6px 14px; border-radius:22px; font-size:13px; cursor:pointer; color:var(--ctp-text); line-height:1; }
.strategy-button .logo { width:18px; height:18px; display:block; }
.strategy-button .chevron { font-size:12px; opacity:.6; margin-left:4px; }
.strategy-button:focus-visible { outline:2px solid var(--ctp-blue); outline-offset:2px; }
.strategy-menu { position:absolute; top:100%; left:0; margin:6px 0 0; background:#2d292b; border:1px solid #3a3537; border-radius:14px; list-style:none; padding:6px; display:none; min-width:170px; z-index:100; box-shadow:0 6px 18px -6px rgba(0,0,0,.6); }
.strategy-dropdown[aria-expanded="true"] .strategy-menu { display:block; }
.strategy-menu li { display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px; color:var(--ctp-text); }
.strategy-menu li .logo { width:18px; height:18px; }
.strategy-menu li[aria-selected="true"] { background:#3a3537; }
.strategy-menu li:hover { background:#3a3537; }
.hidden-controls { margin-top:16px; display:flex; gap:14px; align-items:center; background:#1d191a; padding:12px 16px; border-radius:18px; border:1px solid #2e2a2b; }
.hidden { display:none; }
.composer-inner { max-width:1080px; margin:0 auto; display:flex; flex-direction:column; gap:14px; }
.composer-controls { display:flex; align-items:center; gap:12px; flex-wrap:wrap; justify-content:space-between; }
.composer-controls .segmented { transform:scale(.95); }
.composer-controls .strategy-select { min-width:220px; }
.textarea-wrapper { position:relative; }
.composer textarea { /* ensure visible inside pill */ display:block; }
.composer-actions { display:flex; justify-content:space-between; align-items:center; gap:18px; flex-wrap:wrap; }
.composer-actions .meta { font-size:12px; color:var(--ctp-overlay1); }
.action-group { display:flex; align-items:center; gap:10px; }
.chat-footer { text-align:center; font-size:11px; padding:10px 0 16px; color:var(--ctp-overlay1); }
.small { padding:6px 12px; font-size:12px; }

/* Typing indicator */
.typing { display:inline-flex; gap:6px; align-items:center; margin-top:4px; }
.typing-dot { width:8px; height:8px; background:var(--ctp-overlay1); border-radius:50%; animation:typing 1s ease-in-out infinite; }
.typing-dot:nth-child(2){ animation-delay:.2s; }
.typing-dot:nth-child(3){ animation-delay:.4s; }
@keyframes typing { 0%,80%,100% { opacity:.3; transform:translateY(0);} 40% { opacity:1; transform:translateY(-4px);} }

/* Scrollbar refinement */
.messages-scroll::-webkit-scrollbar { width:12px; }
.messages-scroll::-webkit-scrollbar-track { background:var(--ctp-mantle); }
.messages-scroll::-webkit-scrollbar-thumb { background:var(--ctp-surface2); border-radius:10px; border:3px solid var(--ctp-mantle); }
.messages-scroll::-webkit-scrollbar-thumb:hover { background:var(--ctp-overlay1); }

/* Responsive adjustments */
@media (max-width:900px){
  .conversation.fullwidth { padding:30px 34px 180px; }
  .composer.minimal-bar { padding:28px 34px 38px; }
  .input-pill { padding:12px 18px; }
}

/* Step Builder */
.step-builder { background:var(--ctp-mantle); border:1px solid var(--ctp-surface0); border-radius:16px; padding:16px; margin-bottom:12px; }
.step-builder-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.step-count { font-size:13px; color:var(--ctp-subtext1); font-weight:500; }
.add-step-btn { background:var(--ctp-green); color:var(--ctp-base); border:none; padding:6px 12px; border-radius:8px; font-size:13px; font-weight:600; cursor:pointer; transition:all .2s; }
.add-step-btn:hover { background:var(--ctp-teal); transform:translateY(-1px); }
.add-step-btn:disabled { background:var(--ctp-surface0); color:var(--ctp-overlay0); cursor:not-allowed; transform:none; }
.steps-list { display:flex; flex-direction:column; gap:10px; }
.step-item { background:var(--ctp-base); border:1px solid var(--ctp-surface0); border-radius:12px; padding:12px; display:flex; gap:10px; align-items:flex-start; }
.step-number { background:var(--ctp-surface0); color:var(--ctp-text); width:24px; height:24px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:600; flex-shrink:0; }
.step-content { flex:1; display:flex; flex-direction:column; gap:8px; }
.step-input { background:var(--ctp-surface0); border:1px solid var(--ctp-surface1); border-radius:8px; padding:8px 10px; color:var(--ctp-text); font-size:13px; font-family:inherit; width:100%; resize:vertical; min-height:60px; }
.step-input:focus { outline:none; border-color:var(--ctp-blue); }
.step-db-select { display:flex; gap:8px; align-items:center; }
.step-db-option { background:var(--ctp-surface0); border:1px solid var(--ctp-surface1); padding:6px 12px; border-radius:8px; font-size:12px; cursor:pointer; display:flex; align-items:center; gap:6px; transition:all .2s; }
.step-db-option:hover { border-color:var(--ctp-overlay0); }
.step-db-option.active { background:var(--ctp-blue); border-color:var(--ctp-blue); color:var(--ctp-base); }
.step-db-option img { width:16px; height:16px; }
.step-remove { background:var(--ctp-red); color:var(--ctp-base); border:none; padding:4px 8px; border-radius:6px; font-size:11px; cursor:pointer; align-self:flex-start; }
.step-remove:hover { background:var(--ctp-maroon); }

@media (max-width:560px) {
	.header-left { flex:1 1 100%; }
	.header-right { width:100%; justify-content:flex-start; }
	.controls-inline { gap:10px; }
	.logo { font-size:19px; }
}

@media (max-width:800px) {
	.conversation { padding:0 14px; }
	.messages-scroll { padding:24px 0 240px; }
	.composer.floating { padding:26px 0 30px; }
	.composer.floating .composer-inner { padding:18px 20px 16px; }
	.composer textarea { min-height:70px; }
}
.app-body { flex:1; display:grid; grid-template-columns:280px 1fr; gap:26px; padding:26px clamp(12px,4vw,38px); }
.sidebar { display:flex; flex-direction:column; gap:22px; }
.block { background:var(--ctp-mantle); border:1px solid var(--ctp-surface0); padding:16px 16px 18px; border-radius:var(--radius-lg); box-shadow:var(--shadow-sm); }
.block-title { margin:0 0 12px; font-size:13px; font-weight:600; letter-spacing:.7px; color:var(--ctp-subtext0); text-transform:uppercase; }
select.full { width:100%; }

.history-list { list-style:none; margin:0; padding:0; max-height:240px; overflow:auto; font-size:13px; }
.history-list li { padding:8px 10px; border:1px solid var(--ctp-surface1); border-radius:var(--radius-sm); margin-bottom:6px; cursor:pointer; background:var(--ctp-surface0); display:flex; flex-direction:column; gap:4px; }
.history-list li:hover { background:var(--ctp-surface1); }
.history-list li .meta { font-size:11px; color:var(--ctp-overlay1); display:flex; gap:8px; }
.history-block .tiny { font-size:11px; padding:2px 6px; line-height:1; }

.main-content { display:flex; flex-direction:column; gap:26px; }
.card { background:var(--ctp-mantle); border:1px solid var(--ctp-surface0); border-radius:var(--radius-lg); padding:0; box-shadow:var(--shadow-md); overflow:hidden; display:flex; flex-direction:column; }
.card-header { display:flex; align-items:center; gap:16px; padding:14px 18px; background:var(--ctp-surface0); border-bottom:1px solid var(--ctp-surface1); }
.card-header h2 { flex:1; margin:0; font-size:15px; font-weight:600; letter-spacing:.4px; }

.query-card textarea { border:0; border-top:1px solid var(--ctp-surface1); border-bottom:1px solid var(--ctp-surface1); border-radius:0; background:var(--ctp-base); min-height:160px; margin:0; }
.helper-row { display:flex; justify-content:space-between; padding:10px 16px 12px; font-size:12px; background:var(--ctp-base); }
.hint { color:var(--ctp-overlay1); }

.results-card .output { margin:0 16px 18px; background:var(--ctp-base); }
.tabs { display:inline-flex; background:var(--ctp-surface1); border:1px solid var(--ctp-surface2); border-radius:var(--radius-md); overflow:hidden; }
.tab { background:transparent; border:0; padding:8px 14px; font-size:12.5px; font-weight:500; cursor:pointer; color:var(--ctp-subtext1); transition:var(--transition-fast); }
.tab.active { background:var(--ctp-surface2); color:var(--ctp-text); }
.tab:not(.active):hover { background:var(--ctp-overlay0); }

.segmented { display:inline-flex; background:var(--ctp-surface1); border:1px solid var(--ctp-surface2); border-radius:var(--radius-md); overflow:hidden; }
.segmented button { border:0; background:transparent; padding:8px 16px; font-size:13px; font-weight:500; cursor:pointer; color:var(--ctp-subtext1); transition:var(--transition-fast); }
.segmented button.active { background:var(--ctp-blue); color:var(--ctp-crust); }
.segmented button:not(.active):hover { background:var(--ctp-overlay0); }

.ghost { background:var(--ctp-surface0); border-color:var(--ctp-surface1); }
.ghost:hover { background:var(--ctp-surface1); }

.status-dot { padding:6px 12px; border-radius:var(--radius-md); font-size:12px; background:var(--ctp-surface0); border:1px solid var(--ctp-surface1); }
.status-dot[data-status="ok"] { background:var(--ctp-green); color:var(--ctp-crust); border-color:var(--ctp-green); }
.status-dot[data-status="error"] { background:var(--ctp-red); color:var(--ctp-crust); border-color:var(--ctp-red); }

.brand { display:flex; flex-direction:column; }
.brand h1 { font-size:22px; margin:0; }
.brand .tag { font-size:11px; letter-spacing:.8px; color:var(--ctp-overlay2); text-transform:uppercase; }
.header-actions { display:flex; align-items:center; gap:16px; flex-wrap:wrap; }

.toast-container { position:fixed; bottom:18px; right:18px; display:flex; flex-direction:column; gap:12px; width:320px; z-index:50; }
.toast { background:var(--ctp-mantle); border:1px solid var(--ctp-surface1); padding:12px 14px; border-radius:var(--radius-md); box-shadow:var(--shadow-md); display:flex; gap:12px; font-size:13px; animation:fade .35s ease; }
.toast.success { border-color:var(--ctp-green); }
.toast.error { border-color:var(--ctp-red); }
.toast .close { margin-left:auto; background:transparent; border:0; color:var(--ctp-overlay1); cursor:pointer; font-size:16px; }
.toast .close:hover { color:var(--ctp-text); }

.loading-overlay { position:fixed; inset:0; background:rgba(17,17,27,0.72); backdrop-filter:blur(6px); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:22px; z-index:60; font-size:15px; }
.loading-overlay.hidden { display:none; }
.spinner { width:54px; height:54px; border-radius:50%; border:6px solid var(--ctp-surface2); border-top-color:var(--ctp-blue); animation:spin 1s linear infinite; }
@keyframes spin { to { transform:rotate(360deg); } }

.app-footer { padding:16px 28px 30px; font-size:12px; color:var(--ctp-overlay1); text-align:center; }
.app-footer a { color:var(--ctp-mauve); text-decoration:none; }
.app-footer a:hover { text-decoration:underline; }

/* Accessibility helpers */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

@media (max-width:1000px) {
	.app-body { grid-template-columns:1fr; }
	.sidebar { flex-direction:row; flex-wrap:wrap; }
	.block { flex:1 1 260px; }
	.history-block { flex:1 1 100%; }
}
